# manatal-code-challenge-django
by Poompatai Puntitpong

Live example: https://django-challenge-poompatai.herokuapp.com

## Data models specification

1.School
   - id (auto generated by django)
   - name (Text not exceeding 20 characters)
   - max_student (Positive integer)
   - location (Text not exceeding 100 characters)

2.Student
   - id (random 20 characters hex)
   - first_name (Text not exceeding 20 characters)
   - last_name (Text not exceeding 20 characters)
   - age (Integer in range 0,150)
   - Nationality (Text not exceeding 100 characters)
   - School (Delete Cascade)

## Extra Features
   - Normal filter(exact match)
   - Search filter
   - Ordering
   - Pagination of fixed size 20

## Endpoints

All requests data must be application/json format
Url can be both slash-appended or not

According to the specifications

### School
1.School creation

    (POST) schools/

   - payload: every field except id (all fields required)

2.School list view

    (GET) schools?(filter_field=filter_value)&(search=searchtext)&(ordering=ordering)
    
   - filterable: name, max_student
   - searchable: name, location
   - ordering: max_student

3.School view info

    (GET) schools/:id

4.School edit data

    (PUT) schools/:id

   - payload: every field except id (all fields required)
   
    (PATCH) schools/:id

   - payload: only editing fields are required

5.School delete

    (DELETE) schools/:id
    
### Student
1.Student creation

    (POST) students/

   - payload: every field except id (all fields required)

2.Student list view

    (GET) students?(filter_field=filter_value)&(search=searchtext)&(ordering=ordering)
   
   - filterable: first_name, last_name, age, nationality
   - searchable: first_name, last_name, nationality, school_name
   - ordering: age, nationality

3.Student view info

    (GET) students/:id

4.Student edit data

    (PUT) students/:id

   - payload: every field except id (all fields required)
   
    (PATCH) students/:id

   - payload: only editing fields are required

5.Student delete

    (DELETE) students/:id

### Nested Student in school
1.Student creation in school

    (POST) schools/school_id/students/

   - payload: every field except id and school (all fields required, if school provided it is ignored)

2.Student list view in school

    (GET) schools/school_id/students?(filter_field=filter_value)&(search=searchtext)&(ordering=ordering)
    
   - filterable: first_name, last_name, age, nationality
   - searchable: first_name, last_name, nationality, school_name
   - ordering: age, nationality

3.Student in school view info

    (GET) schools/school_id/students/student_id

4.Student in school edit data

    (PUT) schools/school_id/students/student_id

   - payload: every field except id (all fields required)
   
    (PATCH) schools/school_id/students/student_id

   - payload: only editing fields are required

5.Student in school delete

    (DELETE) schools/school_id/students/student_id
    
## Testing

Run tests
    
    python manage.py test
    
Normal test cases covers most(if not all) operations, urls with and without trailing slash, strange format inputs, wrong url, searching, ordering and paginations.

### Interesting edge cases

- You cannot add student to a full school.
- In a full school, student can be PUT/PATCH to the same old school, but students from other schools cannot be PUT/PATCH into the full school.
- If use nested students url, creation ignores input school and school is not a required field anymore.

## Time tracking

Step1 : 2 hours

Step2 : 1 hour

Step3 : 1 hour

Bonuses: 2 hours

Refactoring: 1 hour

Testing and finalize: 5 hours
